<div class="container-fluid hnavbar-wrapper">
  <div class="d-flex w-100 mat-elevation-z1 p-1 horizontal-navbar">
    <div class="nav-group">
          <button class="btn btn-sm  nav-toggle-icon" *ngIf="canToggle" title="Expand Navbar" (click)="toggleMe()">
            <i class="fa fa-times text-white" *ngIf="isOpen"></i>
            <i class="fa fa-bars text-white" *ngIf="!isOpen"></i>
          </button>

          <h5 class="mt-auto mb-auto d-inline-block brand p-2">
            <a class="p-4" [routerLink]="['/']">JD</a>
          </h5>
    </div>
    <div
      class="nav-group"
      [class.search-panel]="isSearchPanelOpen"
      [class.search-panel-close]="!isSearchPanelOpen"
    >
      <span
        class="fa fa-times p-2"
        *ngIf="isSearchPanelOpen"
        (click)="isSearchPanelOpen = false"></span>
      <input
        #searchbox="ngModel"
        [(ngModel)]="searchTerm"
        (ngModelChange)="performSearch()"
        (focusin)="searchBoxHasFocus = true; isSearchPanelOpen = true"
        (focusout)="searchBoxHasFocus = false"
        name="searchTerm"
        type="search"
        [placeholder]="'Search '+pageTitle+ ' By Title'"
        class="p-2 d-inline-block rounded"/>
      <div
        class="search-results"
        [class.d-none]="(isSearchPanelOpen === false)  && !searchBoxHasFocus"
      >
          <h3 class="text-capitalize text-center" *ngIf="searchTerm?.length">
            {{ searchResults.length }} Results Found
          </h3>

          <div *ngFor="let result of searchResults" [class.d-none]="!isSearchPanelOpen" class="row mt-4 ">
            <div class="
              result-body-wrapper
              col-sm-12
              col-md-8
              m-auto
              mat-elevation-z1"
              (click)="viewArticle($event, result.id)"
              >
              <h4 class="text-center text-capitalize ">
                <a href (click)="viewArticle($event, result.id)">
                  {{result.title}}
                </a>
              </h4>
              <div markdown class="search-result-body ">
                {{ result.body }}
              </div>
            </div>

          </div>
      </div>
    </div>
  </div>
</div>

<div class="collapsed-nav bg-sidenav" *ngIf="!isOpen">
  <div class="collapsed-nav-item">
    <ng-container *ngFor="let item of nav?.items">
      <a (click)="goToLocation(item.path, item.queries, false);" class="p-2">
        <mat-list-item class="text-capitalize text-center border-bottom">{{ item.name[0] }}</mat-list-item>
      </a>
    </ng-container>
  </div>
</div>

<mat-sidenav-container class="bg-sidenav-container sidenav-container">
  <mat-sidenav class="bg-sidenav position-fixed " ngClass="{ collapsed: !isOpen }" #sidenav [mode]="mode" [opened]="isOpen">
    <nav class="main-nav">

      <div class="p-2 border-bottom m-auto avatar w-100">
        <a [routerLink]="['./']" class="">
          <img [src]="nav?.iconUrl" alt="author avatar" width="232">
        </a>
      </div>

      <mat-nav-list  class="color-main">
        <ng-container *ngFor="let item of nav?.items">
          <a (click)="goToLocation(item.path, item.queries);">
            <mat-list-item class="text-capitalize border-bottom">{{ item.name }}</mat-list-item>
          </a>
        </ng-container>
      </mat-nav-list>
    </nav>
  </mat-sidenav>

    <!-- This is  a quick hack to make few pages stick to the top-->
  <mat-sidenav-content
    [ngClass]="{ 'no-margin-top': removeTopMargin }"
    class="row"
  >
    <div class="sidenav-content"
      class="col-12"
      [ngClass]="{
        'sidenav-content-full': contentUISizing == contentSizingValues.Fill
      }"
    >
     <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>

</mat-sidenav-container>
